---
layout: default
---

<!-- HERO SECTION -->
<section class="hero">
    <div class="container">
        <h1>{{ site.title }}</h1>
        <p>{{ site.description }}</p>

        <!-- ADS SLOT HERO -->
        <div class="ads-container">
            <div class="ads-label">ADVERTISEMENT</div>
            <!-- Pasang kode AdSense di sini -->
        </div>
    </div>
</section>

<!-- MAIN CONTENT -->
<section id="channels" class="container main-section">
    <div class="section-header">
        <div class="title-wrapper">
            <span class="live-dot"></span>
            <h2>Channel Populer</h2>
        </div>
    </div>

    <!-- GRID SALURAN -->
    <div id="post-container" class="post-grid">
        {% for post in paginator.posts %}
        <article class="post-card">
            <a href="{{ post.url | relative_url }}" class="card-link-wrapper">
                <div class="thumb-container">
                    <img src="{{ post.image | relative_url }}" alt="{{ post.title }}" loading="lazy">
                    <span class="live-tag">LIVE</span>
                </div>
                <div class="post-info">
                    <span class="category">{{ post.category }}</span>
                    <h3>{{ post.title }}</h3>
                    <p class="program-desc">{{ post.program | truncate: 60 }}</p>
                </div>
            </a>
        </article>
        {% endfor %}
    </div>

{% if paginator and paginator.total_pages > 1 %}
<div class="pagination-nav">
  <a 
    id="loadMoreBtn"
    href="{{ paginator.next_page_path | relative_url }}"
    data-next="{{ paginator.next_page_path | relative_url }}"
    class="btn-page">
    Lihat Saluran Lainnya »
  </a>
</div>
{% endif %}

    <!-- ADS SLOT BOTTOM -->
    <div class="ads-container" style="margin-top: 40px;">
        <div class="ads-label">ADVERTISEMENT</div>
        <!-- Pasang kode AdSense di sini -->
    </div>
</section>

<!-- LOAD MORE SCRIPT -->
<script>
document.addEventListener("DOMContentLoaded", function () {
    const btn = document.getElementById("loadMoreBtn");
    const container = document.getElementById("post-container");
    if (!btn || !container) return;

    btn.addEventListener("click", function () {
        let nextPage = btn.dataset.next;
        if (!nextPage || nextPage === "") return;

        // Loading State
        btn.innerText = "Sedang Memuat...";
        btn.disabled = true;

        fetch(nextPage)
            .then(res => {
                if (!res.ok) throw new Error("Gagal mengambil data");
                return res.text();
            })
            .then(html => {
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, "text/html");

                // Ambil elemen dari halaman baru
                const newPosts = doc.querySelector("#post-container");
                const newBtn = doc.querySelector("#loadMoreBtn");

                // Masukkan postingan baru ke container saat ini
                if (newPosts && newPosts.innerHTML.trim() !== "") {
                    container.insertAdjacentHTML("beforeend", newPosts.innerHTML);
                }

                // Cek apakah masih ada halaman selanjutnya
                if (newBtn && newBtn.dataset.next && newBtn.dataset.next !== "") {
                    btn.dataset.next = newBtn.dataset.next;
                    btn.innerText = "Lihat Saluran Lainnya »";
                    btn.disabled = false;
                } else {
                    // JIKA POSTINGAN HABIS
                    btn.innerText = "Semua saluran telah ditampilkan";
                    btn.disabled = true;
                    btn.classList.add("btn-finished");
                }
            })
            .catch(err => {
                console.error(err);
                btn.innerText = "Gagal Memuat. Coba Lagi?";
                btn.disabled = false;
            });
    });
});
</script>
