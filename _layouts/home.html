---
layout: default
---

---
layout: default
---

<!-- HERO SECTION -->
<section class="hero">
    <div class="container">
        <h1>{{ site.title }}</h1>
        <p>{{ site.description }}</p>

        <!-- ADS SLOT HERO -->
        <div class="ads-container">
            <div class="ads-label">ADVERTISEMENT</div>
            <!-- Pasang kode AdSense di sini -->
        </div>
    </div>
</section>

<!-- MAIN CONTENT -->
<section id="channels" class="container main-section">
    <div class="section-header">
        <div class="title-wrapper">
            <span class="live-dot"></span>
            <h2>Channel Populer</h2>
        </div>
    </div>

    <!-- PENTING: Jangan hapus id="post-container" -->
    <div id="post-container" class="post-grid">
        {% for post in paginator.posts %}
        <article class="post-card">
            <a href="{{ post.url | relative_url }}" class="card-link-wrapper">
                <div class="thumb-container">
                    <img src="{{ post.image | relative_url }}" alt="{{ post.title }}" loading="lazy">
                    <span class="live-tag">LIVE</span>
                </div>
                <div class="post-info">
                    <span class="category">{{ post.category }}</span>
                    <h3>{{ post.title }}</h3>
                    <p class="program-desc">{{ post.program | truncate: 60 }}</p>
                </div>
            </a>
        </article>
        {% endfor %}
    </div>

    <!-- PAGINATION AREA -->
    {% if paginator.next_page %}
    <div class="pagination-nav">
        <button 
            id="loadMoreBtn"
            data-next="{{ paginator.next_page_path | relative_url }}"
            class="btn-page">
            Lihat Saluran Lainnya »
        </button>
    </div>
    {% endif %}

    <!-- ADS SLOT BOTTOM -->
    <div class="ads-container" style="margin-top: 40px;">
        <div class="ads-label">ADVERTISEMENT</div>
        <!-- Pasang kode AdSense di sini -->
    </div>
</section>

<!-- SCRIPT LOAD MORE (VERSI STABIL) -->
<script>
document.addEventListener("DOMContentLoaded", function () {
    const btn = document.getElementById("loadMoreBtn");
    const postContainer = document.getElementById("post-container");

    if (!btn || !postContainer) {
        console.error("Elemen pendukung Load More tidak ditemukan!");
        return;
    }

    btn.addEventListener("click", function () {
        let nextPageUrl = btn.getAttribute("data-next");
        if (!nextPageUrl) return;

        btn.innerText = "Sedang Memuat...";
        btn.disabled = true;

        console.log("Mencoba mengambil:", nextPageUrl);

        fetch(nextPageUrl)
            .then(res => {
                if (!res.ok) throw new Error("Gagal load halaman");
                return res.text();
            })
            .then(html => {
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, "text/html");

                // Ambil post dari halaman selanjutnya
                const newPosts = doc.getElementById("post-container");
                // Ambil tombol dari halaman selanjutnya untuk update URL data-next
                const nextBtn = doc.getElementById("loadMoreBtn");

                if (newPosts) {
                    // Masukkan konten post baru ke grid utama
                    postContainer.insertAdjacentHTML("beforeend", newPosts.innerHTML);
                    console.log("Konten berhasil ditambahkan.");
                }

                if (nextBtn && nextBtn.getAttribute("data-next")) {
                    // Update URL tombol untuk klik berikutnya (misal dari page2 ke page3)
                    btn.setAttribute("data-next", nextBtn.getAttribute("data-next"));
                    btn.innerText = "Lihat Saluran Lainnya »";
                    btn.disabled = false;
                } else {
                    // Jika sudah tidak ada halaman lagi
                    btn.innerText = "Semua saluran telah ditampilkan";
                    btn.disabled = true;
                    btn.classList.add("btn-finished");
                }
            })
            .catch(err => {
                console.error("Error Fetch:", err);
                btn.innerText = "Gagal Memuat. Coba Lagi?";
                btn.disabled = false;
            });
    });
});
</script>
