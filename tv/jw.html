
<!DOCTYPE html>
<html>
<head>
    <title>Video Player</title>
    <meta content='width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=yes' name='viewport'/>
    <meta content="noindex, nofollow, noarchive" name="robots"/>
    <meta name="referrer" content="no-referrer" />
    <script src="/tv/js/jwplayer.js"></script>
    <script type='text/javascript'>jwplayer.key = "XSuP4qMl+9tK17QNb+4+th2Pm9AWgMO/cYH8CI0HGGr7bdjo";</script>

<meta name="robots" content="noindex"/><style>body{margin:0;padding:0}#player, iframe{width:100%;height:100%;position:absolute;z-index:2;top:0;right:0;left:0;bottom:0}#video{width:100%;height:100%;position:absolute;z-index:2;top:0;right:0;left:0;bottom:0} </style>
</head>
<body>
    <div id="player" >

<script type='text/javascript'>
    function getParameterByName(name) {
        var url = window.location.href;
        name = name.replace(/[\[\]]/g, "\\$&");
        var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
            results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, " "));
    }

    var rawId = getParameterByName('id');
    var channelId = rawId ? rawId.toUpperCase() : null;

    fetch('/tv/json/channels.json') 
        .then(response => {
            if (!response.ok) {
                throw new Error("Failed to load channel list (404)");
            }
            return response.json();
        })
        .then(data => {
            var config = data[channelId];

            if (config) {
                var sources = [];

                if (config.url.includes('.m3u8')) {
                    sources.push({
                        file: config.url
                    });
                }
                
                if (config.url.includes('.mpd')) {
                    var drmConfig = {};
                    if (config.k1 && config.k2) {
                        drmConfig = { "clearkey": { "keyId": config.k1, "key": config.k2 } };
                    }
                    sources.push({
                        file: config.url,
                        drm: drmConfig
                    });
                }

                jwplayer("player").setup({
                    playlist: [{
                        sources: sources
                    }],
                    width: "100%",
                    height: "100%",
                    aspectratio: "16:9",
                    autostart: false,
                    cast: {}
                });
            } else {
                document.getElementById('player').innerHTML = 
                    `<div style="color:white;text-align:center;padding-top:20%;">
                        <h3>Channel ID "${channelId}" not found.</h3>
                        <p>Please check your channels.json file.</p>
                    </div>`;
            }
        })
        .catch(error => {
            console.error("Error detail:", error);
            document.getElementById('player').innerHTML = 
                `<p style="color:white;text-align:center;padding-top:20%;">
                    Failed to load channel data: ${error.message}
                </p>`;
        });
</script></div>
</body>
</html>
